<!DOCTYPE html>
<html>

<head>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-58NYGBDL75"></script>
  <script>
    if (window.location.hostname === "localhost") {
      console.log("Analytics not running on local dev.");
    } else {
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-58NYGBDL75');
    }
  </script>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title> How to Update VMware ESXi Hosts with Lifecycle Manager</title>
  <meta name="viewport" content="width=device-width,minimum-scale=1">
  <META NAME="ROBOTS" CONTENT="INDEX, FOLLOW">
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" type="text/css" href="/css/screen.css" />

  
  <link rel="stylesheet" type="text/css" href="/css/custom/screen-custom.css" />
  <link rel="stylesheet" type="text/css" href="/css/fontawesome_all.min.css" />
  <link rel="stylesheet" type="text/css" href="/css/custom/syntax.css" />
  <link rel="stylesheet" type="text/css" href="/css/custom/global-custom.css" />

  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,500,600,700" rel="stylesheet">

  
  <script data-ad-client="ca-pub-8907477009760148" async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

  
<meta name="twitter:card" content="summary_large_image">



<meta name="twitter:creator" content="@_ryanjan_">
<meta name="twitter:site" content="@_ryanjan_">

<meta property="og:title" content="How to Update VMware ESXi Hosts with Lifecycle Manager">
<meta property="og:description" content="This tutorial shows you how to use the vSphere Lifecycle Manager to update ESXi hosts.">
<meta property="og:url" content="https://ryanjan.uk/update-esxi-hosts-using-lifecycle-manager/">

    <meta property="og:image" content="https://ryanjan.uk/update-esxi-hosts-using-lifecycle-manager/feature-image.png">


</head>





<body class='post-template' >
  <div class="viewport">
    <header id="gh-head" class="gh-head">
      <nav class="gh-head-inner inner gh-container">

        <div class="gh-head-brand">
          <a class="gh-head-logo" href="/">
            <img src="/images/favicon.png" />
          </a>
          <a class="gh-burger" role="button">
            <div class="gh-burger-box">
              <div class="gh-burger-inner"></div>
            </div>
          </a>
        </div>
        <div class="gh-head-menu">
          <ul class="nav">
    <li class="nav-home nav-current"><a href="/">Home</a></li>
    <li class="nav-about"><a href="/about/">About</a></li>
</ul>
        </div>
        <div class="gh-head-actions">
          <div class="gh-social">
            <a class="gh-social-github" href="https://github.com/ryan-jan" title="GitHub" target="_blank"
              rel="noopener">
              <i class="fab fa-github fa-lg"></i>
            </a>
            <a class="gh-social-twitter" href="https://twitter.com/_ryanjan_" title="Twitter" target="_blank"
              rel="noopener">
              <i class="fab fa-twitter fa-lg"></i>
            </a>
          </div>
          <a class="gh-head-button su-modal-open-button" href="#/subscribe">Subscribe</a>
        </div>
      </nav>
    </header>
    <main>
      
<article class="article">
    <header class="article-header gh-canvas">
        
        
        
        <section class="article-tag">
            <a href="/tags/vsphere">vsphere</a>
        </section>
        
        

        <h1 class="article-title">How to Update VMware ESXi Hosts with Lifecycle Manager</h1>

        

        <div class="article-byline">
            <section class="article-byline-content">
                
                
                
                
                
                
                <ul class="author-list">
                    <li class="author-list-item">
                        
                        <a href="https://ryanjan.uk/authors/ryan/" class="author-avatar">
                            
                            <img class="author-profile-image" src="/authors/ryan/avatar_hu2133b973be59ca79693e44e4bc908b85_51876_60x60_fill_q75_box_center.jpg" />
                        </a>
                    </li>
                </ul>
                <div class="article-byline-meta">
                    <h4 class="author-name"><a href="https://ryanjan.uk/authors/ryan/">Ryan Kowalewski</a></h4>
                    <div class="byline-meta-content">
                        29 Aug 2021
                        <span class="byline-reading-time"><span class="bull">&bull;</span> 10 min
                            read</span>
                    </div>
                </div>
                
                
                
            </section>
        </div>

        
        <figure class="article-image">
            <img src="/update-esxi-hosts-using-lifecycle-manager/feature-image.png" alt="feature-image.png" />
        </figure>
        
    </header>

    <section class="gh-content gh-canvas">
        <div class="overlay-toc fixed">
    <span class="toc-title">CONTENTS</span>
    <ul id="toc-list"></ul>
</div>
<p>Managing ESXi patches is every VMware admin&rsquo;s bread and butter. It&rsquo;s not the most glamorous job, but it is essential. However, as your vSphere environment grows, it can become time consuming to manage VMware patches across 100s of ESXi hosts. Enter <a href="https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere-lifecycle-manager.doc/GUID-74295A37-E8BB-4EB9-BFBA-47B78F0C570D.html">vSphere Lifecycle Manager</a> (vLCM)!</p>
<p>In this article, you&rsquo;ll learn how to update ESXi hosts using vLCM. By the end, you&rsquo;ll have all the information required to nail your next patching cycle, and save yourself precious time and energy that you can spend on more interesting tasks!</p>
<div class="in-article-ad">
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
     <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article"
          data-ad-format="fluid" data-ad-client="ca-pub-8907477009760148" data-ad-slot="3921250676"></ins>
     <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
</div>
<h2 id="what-is-vsphere-lifecycle-manager">What is vSphere Lifecycle Manager?</h2>
<p>vSphere Lifecycle Manager is a built-in vSphere service that provides centralized, automated patch and version management for ESXi hosts. Using vLCM you can perform the following tasks:</p>
<ul>
<li>Install patches on ESXi hosts using built-in or custom Patch Baselines.</li>
<li>Upgrade ESXi hosts using Upgrade Baselines.</li>
<li>Install and update third-party software on ESXi hosts.</li>
</ul>
<p>vLCM was introduced in <a href="https://blogs.vmware.com/vsphere/2020/03/vsphere-7-features.html">vSphere 7</a> and comes bundle with the <a href="https://docs.vmware.com/en/VMware-vSphere/6.7/com.vmware.vsphere.vcsa.doc/GUID-223C2821-BD98-4C7A-936B-7DBE96291BA4.html">vCenter Server Appliance</a> (VCSA). This is awesome! It means you can dive straight into managing hosts with vLCM, using the built-in <a href="https://kb.vmware.com/s/article/2147929">vSphere HTML5 Client</a> plug-in, as soon as you&rsquo;ve deployed your VCSA.</p>
<div class="callout info">
    <div class="callout-wrapper">
        <span>
            
            <i class="fas fa-info-circle fa-lg"></i>
            
        </span>
        <div class="callout-content">
            <p>In previous vSphere versions vLCM was known as <a href="https://docs.vmware.com/en/VMware-vSphere/6.7/com.vmware.vsphere.update_manager.doc/GUID-EF6BEE4C-4583-4A8C-81B9-5B074CA2E272.html">VMware Update Manager</a> (VUM). Although there are some slight differences in the client interfaces, most of the tasks that you&rsquo;ll see in this tutorial are essentially the same whether you&rsquo;re running vLCM or VUM.</p>
        </div>
    </div>
</div>
<div class="in-article-ad">
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
     <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article"
          data-ad-format="fluid" data-ad-client="ca-pub-8907477009760148" data-ad-slot="3921250676"></ins>
     <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
</div>
<h2 id="managing-the-lifecycle-manager-depot">Managing the Lifecycle Manager Depot</h2>
<p>Before you start updating ESXi hosts it&rsquo;s a good idea to understand where the patches are stored in vLCM. vLCM uses the concept of a &ldquo;depot&rdquo; to store all of its different media such as ESXi updates, ISO images, and 3rd party vendor components.</p>
<h3 id="viewing-available-updates-in-the-depot">Viewing available updates in the depot</h3>
<p>To view all available ESXi updates in the depot:</p>
<ol>
<li>
<p>Access the Lifecycle Manager plug-in via the vSphere Client, by browsing to <strong>Menu &gt; Lifecycle Manager.</strong></p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled.png" alt="(.Get 1)" />
    	<figcaption>Accessing the vSphere Lifecycle Manager plug-in from the vSphere Client.</figcaption>
    </figure>
</li>
<li>
<p>Select a vCenter server from the dropdown menu and click the <strong>Updates</strong> tab. The available updates are shown in the main table.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%201.png" alt="(.Get 1)" />
    	<figcaption>Viewing the available updates in the vLCM depot for a specific vCenter server.</figcaption>
    </figure>
</li>
</ol>
<h3 id="configuring-automatic-patch-downloads">Configuring automatic patch downloads</h3>
<p>To ensure you have the latest patches available in your vCenter, you can configure vLCM to automatically download patches from the internet on a schedule. To configure this task:</p>
<ol>
<li>
<p>In the Lifecycle Manager plug-in, select <strong>Settings &gt; Patch Downloads &gt; Edit</strong>.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%202.png" alt="(.Get 1)" />
    	<figcaption>Launching the Edit dialog to configure the automatic download settings.</figcaption>
    </figure>
</li>
<li>
<p>In the <strong>Edit Settings</strong> dialog, check the <strong>Download patches</strong> checkbox, configure the schedule as required, and then click <strong>Save.</strong></p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%203.png" alt="(.Get 1)" />
    	<figcaption>Enabling the download schedule in the Edit Settings dialog.</figcaption>
    </figure>
<div class="callout info">
    <div class="callout-wrapper">
        <span>
            
            <i class="fas fa-info-circle fa-lg"></i>
            
        </span>
        <div class="callout-content">
            <p>If you&rsquo;re behind corporate firewalls you&rsquo;ll need to make sure there are rules in place allowing access to <code>https://hostupdate.vmware.com</code> to download updates using this method. Alternatively, you can <a href="https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere-lifecycle-manager.doc/GUID-F13C2514-AA7D-472F-BDAA-61017248BFD2.html">manually import updates into the vLCM depot</a>, using an offline <code>.zip</code> file.</p>
        </div>
    </div>
</div>
</li>
</ol>
<div class="in-article-ad">
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
     <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article"
          data-ad-format="fluid" data-ad-client="ca-pub-8907477009760148" data-ad-slot="3921250676"></ins>
     <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
</div>
<h2 id="creating-attaching-and-detaching-patch-baselines">Creating, attaching, and detaching patch baselines</h2>
<p>Now you&rsquo;ve configured vLCM to download the latest updates automatically, it&rsquo;s time to look at ESXi patch baselines. Patch baselines are vLCM&rsquo;s way of grouping together a set of patches to be applied to one or more ESXi hosts. There are two types of patch baselines, predefined and custom, as you&rsquo;ll learn below.</p>
<h3 id="viewing-predefined-patch-baselines">Viewing predefined patch baselines</h3>
<p>For your convenience, vLCM contains three predefined baselines out of the box. They are:</p>
<ul>
<li>Non-Critical Host Patches</li>
<li>Critical Host Patches</li>
<li>Host Security Patches</li>
</ul>
<p>You can view these predefined baselines by selecting the <strong>Baselines</strong> tab in the Lifecycle Manager plug-in, as follows.</p>

<figure class="post-content-figure">
	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%204.png" alt="(.Get 1)" />
	<figcaption>Viewing predefined patch baselines in the Baselines tab.</figcaption>
</figure>
<p>You may find that these three patch baselines are all you need to meet your patching requirements. However, if you require more control over the set of patches that a baseline contains, you&rsquo;ll need to create a custom patch baseline.</p>
<h3 id="creating-custom-patch-baselines">Creating custom patch baselines</h3>
<p>Custom patch baselines give you complete control over which patches to include in the baseline. You can create a baseline containing a fixed set of patches or create a dynamic baseline that updates the list of patches included as new ones are released. You can even mix both fixed and dynamic baselines, if you need to.</p>
<p>To create a custom baseline:</p>
<ol>
<li>
<p>Select <strong>New &gt; Baseline</strong> in the <strong>Baselines</strong> tab of the Lifecycle Manager plug-in. This will launch the <strong>Create Baseline</strong> dialog.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%205.png" alt="(.Get 1)" />
    	<figcaption>Launching the Create Baseline dialog.</figcaption>
    </figure>
</li>
<li>
<p>In the <strong>Create Baseline</strong> dialog, enter a <strong>Name</strong> for the baseline, select the <strong>Patch</strong> radio button, and click <strong>Next</strong>.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%206.png" alt="(.Get 1)" />
    	<figcaption>Entering a name for the custom patch baseline.</figcaption>
    </figure>
</li>
<li>
<p>In the <strong>Select Patches Automatically</strong> tab, you can create a filter to automatically include certain patches. For example, to include all patches for ESXi 7.0 check the <strong>Automatically update this baseline with patches that match the following criteria</strong> checkbox, select <strong>VMware</strong> from the <strong>Patch vendor</strong> list, and finally select <strong>embeddedEsx 7.0</strong> from the <strong>Product</strong> list.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%207.png" alt="(.Get 1)" />
    	<figcaption>Configuring an automatic patch filter.</figcaption>
    </figure>
</li>
<li>
<p>To view the list of patches matched by the filter, you can select the <strong>Matched</strong> tab.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%208.png" alt="(.Get 1)" />
    	<figcaption>Viewing the select patches in the Matched tab.</figcaption>
    </figure>
</li>
<li>
<p>Once you&rsquo;re happy with the filter criteria, or if you unchecked the <strong>Automatically update this baseline with patches that match the following criteria</strong> checkbox (to create a fixed baseline instead), click the <strong>Next</strong> button.</p>
</li>
<li>
<p>In the <strong>Select Patches Manually</strong> tab, you&rsquo;ll see a list of patches which do not match the automatic filter criteria configured in the previous step (or all patches if you disabled the automatic filter). You can select any of these to manually include them in the baseline.</p>
<p>For example, to include the <strong>cru driver</strong> patch select it from the table and then click <strong>Next</strong>.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%209.png" alt="(.Get 1)" />
    	<figcaption>Including specific patches manually.</figcaption>
    </figure>
</li>
<li>
<p>Finally, review the <strong>Summary</strong> tab information and click <strong>Finish</strong> to create your custom baseline.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2010.png" alt="(.Get 1)" />
    	<figcaption>Reviewing the summary tab completing the baseline creation.</figcaption>
    </figure>
</li>
</ol>
<div class="in-article-ad">
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
     <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article"
          data-ad-format="fluid" data-ad-client="ca-pub-8907477009760148" data-ad-slot="3921250676"></ins>
     <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
</div>
<h3 id="attaching-patch-baselines-to-vsphere-objects">Attaching patch baselines to vSphere objects</h3>
<p>To install a baseline&rsquo;s patches on one or more ESXi hosts, you&rsquo;ll first need to attach the baseline to a vSphere object. If you only have a couple of hosts, you can attach the baseline to the host objects directly. However, this does not scale very well. Instead, you can attach the baseline to an object higher up in the hierarchy, which will then propagate down to any children objects.</p>
<p>For example, to propagate the <strong>MyCustomBaseline</strong> baseline to the hosts <strong>esx-01a.corp.local</strong> and <strong>esx-02a.corp.local,</strong> you can attach it to the parent cluster object <strong>RegionA01-COMP01</strong> using the following steps.</p>
<ol>
<li>
<p>From the <strong>Hosts and Clusters</strong> view, click on the <strong>RegionA01-COMP01</strong> cluster object in the navigation pane on the left.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2011.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Go to the <strong>Updates</strong> tab and scroll down to the <strong>Attached Baselines</strong> section.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2012.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Click <strong>Attach &gt; Attach Baseline or Baseline Group</strong> to launch the <strong>Attach</strong> dialog.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2013.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>In the <strong>Attach</strong> dialog, select the <strong>MyCustomBaseline</strong> baseline object and click <strong>Attach</strong>.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2014.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
</ol>
<p>The <strong>MyCustomBaseline</strong> baseline is now attached to the <strong>RegionA01-COMP01</strong> cluster object. To verify this, go to the <strong>Hosts and Clusters &gt; RegionA01-COMP01 &gt; Updates</strong> tab and scroll down to the <strong>Attached Baselines</strong> section, for example:</p>

<figure class="post-content-figure">
	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2015.png" alt="(.Get 1)" />
	<figcaption></figcaption>
</figure>
<p>As mentioned previously, this also propagates the attachment to the <strong>esx-01a.corp.local</strong> and <strong>esx-02a.corp.local</strong> hosts, as they are children of the <strong>RegionA01-COMP01</strong> cluster. You can verify this by going to the <strong>Updates</strong> tab of each of the hosts individually.</p>
<p>For example, to see the attachment for <strong>esx-01a.corp.local</strong>, go to <strong>Hosts and Clusters &gt; RegionA01-COMP01 &gt; esx-01a.corp.local &gt; Updates</strong> and scroll down to the <strong>Attached Baselines</strong> section, as follows.</p>

<figure class="post-content-figure">
	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2016.png" alt="(.Get 1)" />
	<figcaption></figcaption>
</figure>
<div class="in-article-ad">
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
     <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article"
          data-ad-format="fluid" data-ad-client="ca-pub-8907477009760148" data-ad-slot="3921250676"></ins>
     <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
</div>
<h3 id="detaching-patch-baselines-from-vsphere-objects">Detaching patch baselines from vSphere objects</h3>
<p>You have seen how to attach a custom baseline to a vSphere object, but what about removing them? The process for detaching patch baselines is very similar to attaching them.</p>
<p>For example, to detach the two predefined patch baselines, <strong>Host Security Patches</strong> and <strong>Critical Host Patches,</strong> from the <strong>vcsa-01a.corp.local</strong> vCenter object, use the following steps.</p>
<ol>
<li>
<p>From the <strong>Hosts and Clusters</strong> view, click on the <strong>vcsa-01a.corp.local</strong> vCenter object in the navigation pane on the left, then go to <strong>Updates &gt; Hosts &gt; Baselines</strong> and scroll down to <strong>Attached Baselines</strong>.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2017.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Select the <strong>Host Security Patches</strong> baseline and click <strong>Detach</strong> to launch the <strong>Detach</strong> dialog.</p>
</li>
<li>
<p>Select the <strong>vcsa-01a.corp.local</strong> object and click <strong>Detach.</strong></p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2018.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Repeat steps 2 and 3 for the <strong>Critical Host Patches</strong> baseline.</p>
</li>
</ol>
<h2 id="working-with-baseline-groups-optional">Working with baseline groups (optional)</h2>
<p>Baseline groups are used to group multiple baselines into a single logical container. While they are completely optional, they can be useful if you need to deploy multiple baselines at the same time.</p>
<p>For example, to create a baseline group (<strong>MyBaselineGroup</strong>) containing two patch baselines (<strong>MyCustomBaseline1</strong> and <strong>MyCustomBaseline2</strong>) and attach it to the <strong>RegionA01-COMP01</strong> cluster object, use the following steps.</p>
<ol>
<li>
<p>Go to <strong>Lifecycle Manager &gt; Baselines</strong> and click <strong>New &gt; Baseline Group</strong>.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2019.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>In the <strong>Create Baseline Group</strong> dialog, enter <strong>MyBaselineGroup</strong> in the Name field and click <strong>Next.</strong></p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2020.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Click <strong>Next</strong> to skip the <strong>Upgrade Baseline</strong> page as this is not necessary for this example.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2021.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>On the <strong>Patch Baselines</strong> page, select the <strong>MyCustomBaseline1</strong> and <strong>MyCustomBaseline2</strong> baselines and click <strong>Next</strong>.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2022.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Click  <strong>Next</strong> to skip the <strong>Extension Baselines</strong> page as it is not necessary for this example.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2023.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Review the <strong>Summary</strong> page and click <strong>Finish</strong> to create the baseline group.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2024.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Now go to <strong>Hosts and Clusters &gt; RegionA01-COMP01 &gt; Updates</strong> and click <strong>Attach &gt; Attach Baseline or Baseline Group</strong>.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2025.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>In the <strong>Attach</strong> dialog, select the <strong>MyBaselineGroup</strong> object and click <strong>Attach</strong>.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2026.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
</ol>
<div class="in-article-ad">
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
     <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article"
          data-ad-format="fluid" data-ad-client="ca-pub-8907477009760148" data-ad-slot="3921250676"></ins>
     <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
</div>
<h2 id="running-baseline-compliance-checks">Running baseline compliance checks</h2>
<p>To understand which hosts are missing patches from a baseline you can run the check compliance task. This will scan each of the targeted hosts and provide a status regarding whether they are compliant or non-compliant, helping you determine which hosts require remediation.</p>
<p>For example, to check the compliance for all hosts in the <strong>RegionA01-COMP01</strong> cluster, use the following steps.</p>
<ol>
<li>
<p>Go to <strong>Hosts and Clusters &gt; RegionA01-COM01 &gt; Updates</strong> and click <strong>Check Compliance.</strong></p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2027.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Monitor the progress of the compliance scan task in the <strong>Recent Tasks</strong> pane at the bottom of the console, or by going to <strong>Hosts and Clusters &gt; RegionA01-COMP01 &gt; Monitor &gt; Tasks and Events &gt; Tasks</strong>.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2028.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Once the compliance check task completes, you&rsquo;ll see a warning in the <strong>Updates</strong> tab if any of the target hosts are missing patches from an attached baseline.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2029.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Scroll down in the <strong>Updates</strong> tab to see which attached baselines are non-compliant.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2030.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
</ol>
<div class="in-article-ad">
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
     <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article"
          data-ad-format="fluid" data-ad-client="ca-pub-8907477009760148" data-ad-slot="3921250676"></ins>
     <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
</div>
<h2 id="remediating-hosts-with-missing-patches">Remediating hosts with missing patches</h2>
<p>Now that you&rsquo;ve identified which hosts are non-compliant, you can run the remediation task to install the missing patches from a specific baseline.</p>
<p>For example, to remediate all hosts in the <strong>RegionA01-COMP01</strong> cluster against the <strong>MyCustomBaseline</strong> baseline, use the following steps.</p>
<p>In this example the RegionA01-COMP01 cluster has DRS enabled with DRS Automation set to Fully Automated. If you&rsquo;re cluster is configured differently, you may need to migrate VMs off of each host, and/or put each host into maintenance mode, manually before starting the remediation task.</p>
<ol>
<li>
<p>Go to <strong>Hosts and Clusters &gt; RegionA01-COMP01 &gt; Updates</strong> and scroll down to the <strong>Attached Baselines</strong> section.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2031.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Select the <strong>MyCustomBaseline</strong> baseline and click <strong>Remediate</strong> to launch the remediate dialog.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2032.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>In the <strong>Remediate</strong> dialog, ensure that the required hosts are select in the <strong>X hosts will remediate</strong> section.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2033.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
</li>
<li>
<p>Expand the <strong>Install X updates</strong> drop down and review the patches to be installed.</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2034.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
<ol>
<li>
<p>If you wish to schedule the remediation task for a later time, expand the <strong>Scheduling Options</strong> drop down and configure as required. This tutorial will leave the default settings to remediate immediately.</p>

        <figure class="post-content-figure">
        	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2035.png" alt="(.Get 1)" />
        	<figcaption></figcaption>
        </figure>
</li>
<li>
<p>Finally, expand the <strong>Remediation settings</strong> drop down and review the settings before proceeding. Click <strong>Remediate</strong> to start the remediation task.</p>

        <figure class="post-content-figure">
        	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2036.png" alt="(.Get 1)" />
        	<figcaption></figcaption>
        </figure>
</li>
</ol>
<p>This creates a remediation task for the cluster object which you can monitor by going to <strong>Hosts and Clusters &gt; RegionA01-COMP01 &gt; Monitor &gt; Tasks and Events &gt; Tasks</strong>; as follows:</p>

    <figure class="post-content-figure">
    	<img src="/update-esxi-hosts-using-lifecycle-manager/Untitled%2037.png" alt="(.Get 1)" />
    	<figcaption></figcaption>
    </figure>
<p>The remediation task performs the following actions for each host:</p>
<ol>
<li>Enters maintenance mode</li>
<li>Installs missing updates</li>
<li>Reboots host</li>
<li>Exits maintenance mode</li>
<li>Runs the check compliance task</li>
</ol>
</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<p>In this tutorial you&rsquo;ve learned how to create, attach, and remediate custom patch baselines using VMware Lifecycle Manager. You&rsquo;ve also created a baseline group containing multiple custom patch baselines. All of the tasks in this tutorial should provide you with the knowledge you need to nail you&rsquo;re next patching cycle. Happy patching!</p>
<div class="in-article-ad">
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
     <ins class="adsbygoogle" style="display:block; text-align:center;" data-ad-layout="in-article"
          data-ad-format="fluid" data-ad-client="ca-pub-8907477009760148" data-ad-slot="3921250676"></ins>
     <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
     </script>
</div>

    </section>

</article>

<section class="footer-cta">
    <div class="inner">
        <h2>Sign up for more like this.</h2>
        <a class="footer-cta-button su-modal-open-button" href="#/subscribe">
            <div>Enter your email</div>
            <span>Subscribe</span>
        </a>
    </div>
</section>

<aside class="read-more-wrap">
    <div class="read-more inner">
        
        
        
        <article class="post-card">

    
    
        <a class="post-card-image-link" href="https://ryanjan.uk/vsphere-global-permissions-with-powershell/">
            <img class="post-card-image" src="/images/2019/06/closed-coming-soon-door-4291.jpg" loading="lazy" />
        </a>
    

    <div class="post-card-content">
        <a class="post-card-content-link" href="https://ryanjan.uk/vsphere-global-permissions-with-powershell/">
            <header class="post-card-header">
                
                
                
                <div class="post-card-primary-tag">powershell</div>
                
                
                <h2 class="post-card-title">Managing vSphere Global Permissions with PowerShell</h2>
            </header>
            <section class="post-card-excerpt">
                <p>It appears that working with vSphere global permissions in PowerCLI is not yet possible. The VIPerms PowerShell module combines the add/remove examples from William&rsquo;s post with a new function to list all global permissions. In this post I will demonstrate how to install and use this module.</p>
            </section>
        </a>

        <footer class="post-card-meta">
            
            
            
            
            
            
            <ul class="author-list">
                <li class="author-list-item">
                    
                    <a href="https://ryanjan.uk/authors/ryan/" class="static-avatar">
                        
                        <img class="author-profile-image" src="/authors/ryan/avatar_hu2133b973be59ca79693e44e4bc908b85_51876_60x60_fill_q75_box_center.jpg" />
                    </a>
                </li>
            </ul>
            
            <div class="post-card-byline-content">
                
                <a href="https://ryanjan.uk/authors/ryan/">Ryan Kowalewski</a>
                
                <span class="post-card-byline-date">19 Jun 2019 <span class="bull"> &bull; </span>
                    3 min read</span>
            </div>
            
            
        </footer>
    </div>
</article>
        
        <article class="post-card">

    
    

    <div class="post-card-content">
        <a class="post-card-content-link" href="https://ryanjan.uk/vmfs-datastore-connectivity-issue/">
            <header class="post-card-header">
                
                
                
                <div class="post-card-primary-tag">vmware</div>
                
                
                <h2 class="post-card-title">ESXi Loses Connectivity to VMFS Datastores.</h2>
            </header>
            <section class="post-card-excerpt">
                <p>Introduction This post explains my recent experiences with certain hosts losing access to some of our VMFS datastores. Hopefully it will help someone avoid the pain that I have been through in diagnosing this issues!
The Symptoms I was initially made aware of this issue as it appeared that certain hosts were losing connectivity to VMFS datastores. Upon investigation I found the following events being logged very frequently against multiple hosts.</p>
            </section>
        </a>

        <footer class="post-card-meta">
            
            
            
            
            
            
            <ul class="author-list">
                <li class="author-list-item">
                    
                    <a href="https://ryanjan.uk/authors/ryan/" class="static-avatar">
                        
                        <img class="author-profile-image" src="/authors/ryan/avatar_hu2133b973be59ca79693e44e4bc908b85_51876_60x60_fill_q75_box_center.jpg" />
                    </a>
                </li>
            </ul>
            
            <div class="post-card-byline-content">
                
                <a href="https://ryanjan.uk/authors/ryan/">Ryan Kowalewski</a>
                
                <span class="post-card-byline-date">11 Jul 2018 <span class="bull"> &bull; </span>
                    6 min read</span>
            </div>
            
            
        </footer>
    </div>
</article>
        
        
    </div>
</aside>

    </main>
    <footer class="site-footer outer">
    <div class="inner">
        <section class="copyright"><a href="https://ryanjan.uk/"></a> &copy; 2023</section>
        <nav class="site-footer-nav">
            <a href="https://ryanjan.uk/">Latest Posts</a>
            <a href="https://github.com/ryan-jan" target="_blank" rel="noopener">GitHub</a>
            <a href="https://twitter.com/_ryanjan_" target="_blank" rel="noopener">Twitter</a>
        </nav>
    </div>
</footer>
  </div>

  <div id="signup-modal" class="su-modal">
    <div class="su-modal-wrapper">
      <div class="su-modal-container">
        <div class="su-modal-content">
          <span class="su-modal-closeicon">&times;</span>
          <header class="su-modal-signup-header"><img class="su-modal-signup-logo" src="/images/favicon.png"
              alt="RyanJan">
            
          </header>
          <form
            action="https://ryanjan.us1.list-manage.com/subscribe/post?u=60a6496a899e75ef8efe2e2ce&amp;id=9265c5169c"
            method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate"
            target="_blank" novalidate>
            <div class="su-modal-section">
              <section class="su-modal-input-section">
                <div class="su-modal-input-labelcontainer">
                  <label for="input-name" class="su-modal-input-label">Name</label>
                </div>
                <input type="text" value="" name="NAME" class="su-modal-input" id="input-name" placeholder="Joe Bloggs">
              </section>
              <section class="su-modal-input-section">
                <div class="su-modal-input-labelcontainer">
                  <label for="input-email" class="su-modal-input-label">Email</label>
                </div>
                <input type="email" value="" name="EMAIL" class="su-modal-input" id="input-email"
                  placeholder="joe.bloggs@example.com">
              </section>
              
              <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text"
                  name="b_60a6496a899e75ef8efe2e2ce_9265c5169c" tabindex="-1" value=""></div>

              <button class="su-modal-btn su-modal-btn-main su-modal-btn-primary" type="submit"
                style="color: rgb(255, 255, 255); background-color: rgb(0, 0, 0); opacity: 1; pointer-events: auto; width: 100%;">Sign
                up</button>

              <div id="mce-responses" class="clear">
                <div class="response" id="mce-error-response" style="display:none"></div>
                <div class="response" id="mce-success-response" style="display:none"></div>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script type='text/javascript' src='//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js'></script>
  <script
    type='text/javascript'>(function ($) { window.fnames = new Array(); window.ftypes = new Array(); fnames[1] = 'NAME'; ftypes[1] = 'text'; fnames[0] = 'EMAIL'; ftypes[0] = 'email'; }(jQuery)); var $mcj = jQuery.noConflict(true);</script>

  
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous">
    </script>
  <script src="/js/casper.js"></script>
  <script>
    $(document).ready(function () {
      
      $('.gh-burger').click(function () {
        $('body').toggleClass('gh-head-open');
      });
      
      $(".gh-content").fitVids();
    });
  </script>

  
  <script type="text/javascript" src="/js/custom/custom.js"></script>

  
</body>

</html>